# HDMI Matrix Proxy - Preset Scripts
# Quick routing presets for common scenarios
#
# The API accepts names for BOTH outputs AND inputs!
# Names are fetched from the matrix - configure them in the matrix web UI.
#
# Examples:
#   By numbers:    {"mappings": {"1": 3, "2": 4}}
#   By names:      {"mappings": {"Living Room TV": "PlayStation 5"}}
#   Mixed:         {"mappings": {"1": "PlayStation 5", "Living Room TV": 3}}

# ============================================================================
# Default 1:1 Routing - Each output shows its corresponding input
# ============================================================================
matrix_default_routing:
  alias: "HDMI Matrix - Default 1:1 Routing"
  icon: mdi:restore
  description: "Reset all outputs to default 1:1 mapping (output N â†’ input N)"
  sequence:
    - service: rest_command.matrix_preset
      data:
        mappings: '{"mappings": {"1": 1, "2": 2, "3": 3, "4": 4, "5": 5, "6": 6, "7": 7, "8": 8}}'
    - delay: "00:00:02"
    - service: homeassistant.update_entity
      target:
        entity_id: sensor.hdmi_matrix_routing

# ============================================================================
# All Outputs to Input 1
# ============================================================================
matrix_all_to_input_1:
  alias: "HDMI Matrix - All to Input 1"
  icon: mdi:numeric-1-box-multiple
  description: "Send Input 1 to all displays"
  sequence:
    - service: rest_command.matrix_preset
      data:
        mappings: '{"mappings": {"1": 1, "2": 1, "3": 1, "4": 1, "5": 1, "6": 1, "7": 1, "8": 1}}'
    - delay: "00:00:02"
    - service: homeassistant.update_entity
      target:
        entity_id: sensor.hdmi_matrix_routing

# ============================================================================
# Gaming Preset - Input 3 to outputs 1 and 3
# ============================================================================
matrix_gaming_preset:
  alias: "HDMI Matrix - Gaming Mode"
  icon: mdi:gamepad-variant
  description: "Route input 3 to outputs 1 and 3"
  sequence:
    - service: rest_command.matrix_preset
      data:
        mappings: '{"mappings": {"1": 3, "3": 3}}'
    - delay: "00:00:02"
    - service: homeassistant.update_entity
      target:
        entity_id: sensor.hdmi_matrix_routing

# ============================================================================
# Movie Preset - Input 1 to multiple outputs
# ============================================================================
matrix_movie_preset:
  alias: "HDMI Matrix - Movie Night"
  icon: mdi:movie-open
  description: "Route input 1 to outputs 1, 2, and 7"
  sequence:
    - service: rest_command.matrix_preset
      data:
        mappings: '{"mappings": {"1": 1, "2": 1, "7": 1}}'
    - delay: "00:00:02"
    - service: homeassistant.update_entity
      target:
        entity_id: sensor.hdmi_matrix_routing

# ============================================================================
# Sports Preset - One input to all outputs
# ============================================================================
matrix_sports_preset:
  alias: "HDMI Matrix - Sports Mode"
  icon: mdi:basketball
  description: "Route input 2 to all displays"
  sequence:
    - service: rest_command.matrix_preset
      data:
        mappings: '{"mappings": {"1": 2, "2": 2, "3": 2, "4": 2, "5": 2, "6": 2, "7": 2, "8": 2}}'
    - delay: "00:00:02"
    - service: homeassistant.update_entity
      target:
        entity_id: sensor.hdmi_matrix_routing

# ============================================================================
# Presentation/Work Preset - Input 7 to outputs 3 and 4
# ============================================================================
matrix_presentation_preset:
  alias: "HDMI Matrix - Work Mode"
  icon: mdi:presentation
  description: "Route input 7 to outputs 3 and 4"
  sequence:
    - service: rest_command.matrix_preset
      data:
        mappings: '{"mappings": {"3": 7, "4": 7}}'
    - delay: "00:00:02"
    - service: homeassistant.update_entity
      target:
        entity_id: sensor.hdmi_matrix_routing

# ============================================================================
# Generic Route Script - Route any input to any output by name or number
# Call with: service: script.matrix_route_custom
#            data:
#              output: "Living Room TV"  (or number)
#              input: "PlayStation 5"    (or number)
# ============================================================================
matrix_route_custom:
  alias: "HDMI Matrix - Custom Route"
  icon: mdi:target
  description: "Route a specific input to a specific output"
  fields:
    output:
      description: "Output number (1-8) or name from matrix"
      example: "1"
      required: true
      selector:
        text:
    input:
      description: "Input number (1-8) or name from matrix"
      example: "1"
      required: true
      selector:
        text:
  sequence:
    - service: rest_command.matrix_route
      data:
        output: "{{ output }}"
        input: "{{ input }}"
    - delay: "00:00:01"
    - service: homeassistant.update_entity
      target:
        entity_id: sensor.hdmi_matrix_routing
